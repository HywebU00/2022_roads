.flowBox {
  ul{ list-style: none; margin: 0; padding: 0;}
  .flowList{
    &>li{ padding: 0; margin: 0;
      &>a{ display: block; color: $fontColor; text-decoration: none;}
      img{ display: block; border: none;}
    }
  }
}


// ------------------------------- flow1
.flow1 {
  .blockHeader{ margin: 0 7% 3em; }

  .flowBox{position: relative;
    margin: 0 0 0 7%;padding: 0 0 120px; overflow: hidden; 
    &::after{
      content: ''; position: absolute; bottom: 37px; right: 0; left: 20px;
      height: 2px; background-color: #4B3321;
    }
  
  }

  .flowList{ display: flex; 
    &>li{ position: relative;
      flex: 0 0 27vw;  margin: 0 2.4vw 0 1.6vw;
      &>a{ width: 100%; }
      img{width: 100%; height: 37.8vw; object-fit: cover;}
      // 圖檔寬高比 width:height = 10:14

      .title{
        font-family: Georgia, 'Times New Roman', Times, serif; font-size: 4vw;
        margin: -10px 0 0 -15px;line-height: 1; z-index: 5;
      }
      .type{
        position: absolute; right: 0; top: 0;
        font-size: 1.5em; line-height: 1.4;
        padding: 1em .8em; width: 2.6em; min-height: 8em;
        color: $fontInvert;
      }
      &:nth-child(3n+1){
        .type{ background-color: $assistant1;}
      }
      &:nth-child(3n+2){
        .type{ background-color: $assistant2;}
      }
      &:nth-child(3n){
        .type{ background-color: $assistant3;}
      }
    }
  }

  // 左右箭頭 button
  .diskBtn{ position: absolute; bottom: 5px; right: 6vw; z-index: 9;
    &.prev{ margin-right: 80px;}
  }

  @media screen and (min-width: $wwMaximum){
    .flowBox{width: $wwMaximum*.93; margin-left: $wwMaximum*.07;}
    .flowList{
      &>li{
        flex-basis: $wwMaximum*.27;  margin: 0 $wwMaximum*.024 0 $wwMaximum*.016;
        img{height: $wwMaximum*.378; }
        .title{ font-size: 3em;}
      }
    }
    .diskBtn{ right: $wwMaximum*.06;}
  }

}


// ------------------------------- flow2：滿版，active 圖放大
.flow2{
  .blockHeader{ margin: 0 7% 3em; }
  outline: 1px solid pink;
  // ---------- flowBox
  .flowBox{ position: relative; padding-bottom: 16px;}

  // ---------- flowList
  .flowList{
    display: flex; align-items: flex-start;
    padding: 10vw 0 6vw; margin: 0 auto 36px;
    background: url(../images/poly01.svg) calc(18vw - 2px) 0 no-repeat;
    background-size: auto 100%;
    &>li{
      position: relative;font-size: .85em; line-height: 1.8;
      flex: 0 0 auto;  padding: 60px 5vw 0;

      &::before, &::after{
        content: ''; position: absolute; top: calc(60px + 6vw + 1.4em);
        width: 4vw; height: 2px; background: $fontColor;
      }
      &::before{ left: 0;}
      &::after{ right: 0;}
      
      p{ margin: 0;}

      figure{position: relative; margin: 0; padding: 0;
        img{ display: block; width: 8vw;  height: 6vw; object-fit: cover; }
        figcaption{ display: block; width: calc(8vw + 1em); padding: .6em 0 0; margin: 0 -.5em;}
      }
      .brief{ display: none;}

      // 中間大圖
      &.active{ 
        flex: 0 0 64vw;
        padding-right: 0; padding-top: 0;font-size: 1em; 
        &::before, &::after{ display: none;}
        figure{padding-right: 19vw;
          img{ width: 40vw; height: 30vw;}
          figcaption{
            position: absolute; left: 40vw; bottom: 0; top: 0;
            width: 19vw; padding: 1em; margin: 0;
            background: $assistant1; color: $fontInvert;
          }
        }

        .brief{display: block; margin: 1em auto 0; }
      }
    }
  }

  // 左右箭頭 button
  .diskBtn{
    position: absolute; bottom: 5px; right: 6vw; z-index: 9;
    &.prev{ margin-right: 80px;}
  }

  // ---------- flowNav 點點或數字
  .flowNav{ text-align: center; margin-left: -5vw;
    button{
      font-size: 1.25em; width: 1.6em; height: 1.6em;
      background: none; border: none; margin: 0 1px; padding: 0;
      color: $primaryColor; cursor: pointer;
      &:hover, &:focus { color: $assistant;}
      &.active{ 
        background: url(../images/poly02.svg) 0 0 no-repeat;
        background-size: contain;
        color: $fontInvert;
      }
    }
  }

  @media screen and (min-width: $wwMaximum){
    .flowList{ 
      padding: $wwMaximum*.1 0 $wwMaximum*.06;
      background-position: calc( #{$wwMaximum}*.18 - 2px) 0;

      &>li{ padding-left: $wwMaximum*.05; padding-right: $wwMaximum*.05;
        &::before, &::after{
          top: calc(60px + #{$wwMaximum}*.06 + 1.4em); width: $wwMaximum*.04;
        }

        figure{
          img { width: $wwMaximum*.08; height: $wwMaximum*0.06;}
          figcaption { width:calc( #{$wwMaximum}*.08 + 1em );}
        }

        &.active{ flex-basis: $wwMaximum*.64;
          figure{ padding-right: 228px;
            img{ width: $wwMaximum*.4; height: $wwMaximum*.3;}
            figcaption{ left: $wwMaximum*.4; width: $wwMaximum*.19; }
          }
        }
      }
    }

    .diskBtn{ right: $wwMaximum*.06;}
  }
}


// ------------------------------- flow3
.flow3{
  max-width: $wwMaximum;
  .blockHeader{ width: 93vw; max-width: 93%; margin: 0 0 3em auto; }

  .flowBox{
    position: relative; 
    width: 93vw; margin-left: 7vw; padding-bottom: 7em;overflow: hidden;
  }
  
  .flowList{
    display: flex; 
    &>li{
      position: relative;flex: 0 0 42%; margin-right: 4%;
      a{ width: 100%; }
      img { // width:height = 7:10
        width: 90%; height: 50vw; // 50vw = 93vw * .42 * (10/7) * 90%
        margin: 10% auto 0; object-fit: cover;
      }
      
      // 簡述文字
      .brief{
        position: absolute; left: 5%; bottom: 0; width: 90%;
        padding: 60px 7% 1.5em;
        background: linear-gradient(#0000, #0008 30%, #000f); color: #fff;
        h3{
          line-height: 1.6; margin: 0; padding: 0;
          text-overflow: ellipsis; white-space: nowrap; overflow: hidden;
        }
        p{
          line-height: 2; margin: 1em 0 0; padding: 1em 0 0;
          border-top: 2px solid $fontInvert;
          display: -webkit-box;overflow: hidden;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
        }
      }

      // 日期
      time{
        position: absolute; right: 0; top: 0;
        padding:1.8em 0 0; margin: 0; width: 6.5em; height: 6.5em;
        font-size: 1.25em;
        text-align: center; line-height: 1.6;
        background: url(../images/poly01.svg) no-repeat center top;
        background-size:contain;
        &::after{
          content: attr(data-label); display: block; font-size: 1rem;
        }
      }
      // 左邊裝飾色塊
      &::before{
        content: ''; z-index: 8;
        position: absolute; left: 0;top: 0; width: 10%; height: 85%;
      }
      &:nth-child(3n+1)::before{background-color: $assistant1;}
      &:nth-child(3n+2)::before{background-color: $assistant2;}
      &:nth-child(3n)::before{background-color: $assistant3;}
    }
  }

  // 左右箭頭 button
  .diskBtn{
    position: absolute; bottom: 5px; right: 6vw; z-index: 9;
    &.prev{ margin-right: 80px;}
  }

  @media screen and (min-width: $wwMaximum){
    .flowBox{ width: $wwMaximum*.93; margin-left: $wwMaximum*.07;}
    .flowList{
      &>li{
        img{
          height: $wwMaximum*.5;
          // .93 * .42 * .9 * (10/7) ~= .5
        }
      }
    }
    .diskBtn{ right: $wwMaximum*.06;}
  }
}


