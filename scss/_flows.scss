.flowBox {
  ul{ list-style: none; margin: 0; padding: 0;}
  .flowList{
    &>li{ padding: 0; margin: 0;
      &>a{ display: block; color: $fontColor; text-decoration: none;}
      img{ display: block; border: none;}
    }
  }
}


// ------------------------------- flow1
.flow1 {
  $dotDia : 12px;
  $bottom : 40px; 
  .blockHeader{ margin: 0 7% 3em; }

  .flowBox{position: relative;
    margin: 0 6.5vw;padding: 0 0 $bottom*2; overflow: hidden; 
    &::after{
      content: ''; position: absolute; bottom: $bottom - 2px; right: 0; left: 0;
      height: 2px; background-color: #4B3321;
    }
  
  }

  .flowList{ display: flex; 
    &>li{ position: relative;
      flex: 0 0 85vw;  margin: 0 1vw;
      &>a{ width: 100%; }
      img{width: 100%; height: 119vw; object-fit: cover;}
      // 圖檔寬高比 width:height = 10:14

      .title{
        font-family: Georgia, 'Times New Roman', Times, serif; font-size: 9vw;
        margin: 10px 0;line-height: 1; z-index: 5;
      }
      .type{
        position: absolute; right: 0; top: 0;
        font-size: 1.5em; line-height: 1.4;
        padding: 1em .8em; width: 2.6em; min-height: 8em;
        color: $fontInvert;
      }
      &:nth-child(3n+1){
        .type{ background-color: $assistant1;}
      }
      &:nth-child(3n+2){
        .type{ background-color: $assistant2;}
      }
      &:nth-child(3n){
        .type{ background-color: $assistant3;}
      }
    }
  }

  // 左右箭頭 button
  .diskBtn{ position: absolute; bottom: 6px; right: 4vw; z-index: 9;
    &.prev{ margin-right: 80px;}
  }

  .flowNav{ position: absolute; bottom: $bottom - $dotDia + 1px; z-index: 9;
    width: calc(100% - 144px - 4vw);
    ul{list-style: none; margin: 0; padding: 0; text-align: center;}
    li{ margin: 0 5px; padding: 0; display: inline-block;
      button{
        width: $dotDia; height: $dotDia; border-radius: 50%;
        background: $primaryColor; border: none; margin: 0; padding: 0;
        transition: .2s;
      }
      &.now{
        button{ background: $assistant; box-shadow: $assistant 0 0 0 2px;}
      }
    }
  }

  @media screen and (min-width: $wwNormal){
    .flowBox{ 
      margin: 0 0 0 7%;padding: 0 0 120px;
      &::after{ left: 20px; }
    }
    .flowList{
      &>li{
        flex: 0 0 27vw;  margin: 0 2.4vw 0 1.6vw;
        img{width: 100%; height: 37.8vw; object-fit: cover;}
        // 圖檔寬高比 width:height = 10:14

        .title{
          font-size: 4vw; margin: -10px 0 0 -15px;
        }
        .type{
          position: absolute; right: 0; top: 0;
          font-size: 1.5em; line-height: 1.4;
          padding: 1em .8em; width: 2.6em; min-height: 8em; max-height: 37.8vw;
          color: $fontInvert; word-break: break-all; overflow: hidden;
        }
      }
    }
    .flowNav{
      li{margin: 0 9px;}
    }

  }

  @media screen and (min-width: $wwMaximum){
    .flowBox{width: $wwMaximum*.93; margin-left: $wwMaximum*.07;}
    .flowList{
      &>li{
        flex-basis: $wwMaximum*.27;  margin: 0 $wwMaximum*.024 0 $wwMaximum*.016;
        img{height: $wwMaximum*.378; }
        .title{ font-size: 3em;}
      }
    }
    .diskBtn{ right: $wwMaximum*.06;}
  }

}



// ------------------------------- flow2：滿版，active 圖放大
.flow2{
  .blockHeader{ margin: 0 6.5vw 1.5em; }
  // -------------------- flowBox
  .flowBox{
    position: relative; overflow: hidden;
    width: 87vw; margin: 0 auto; padding-bottom: 80px;
  }
  // -------------------- flowList
  .flowList{  position: relative;
    display: flex;  flex-flow: row nowrap;
    padding: 0; margin: 0 0 0 -87vw;

    &>li{
      position: relative; line-height: 1.8; padding: 0;
      flex: 0 0 87vw; height: auto;
      &>a{width: 100%;}

      figure{ display: block; margin: 0; padding: 0; background: $assistant1;
        img{display: block;  width: 87vw; height: 63vw; object-fit: cover;}
        figcaption{ display: block; width: 87vw; padding: .6em; color: $fontInvert; }
      }
      .brief{
        display: -webkit-box;
        -webkit-line-clamp: 3; -webkit-box-orient: vertical;
        margin: 1em auto 0;overflow: hidden;
      }
    }
  }

  // ---------- 左右箭頭 button
  .diskBtn{
    position: absolute; bottom: 5px; right: 5px; z-index: 9;
    &.prev{ margin-right: 80px;}
  }

  // ---------- flowNav 點點或數字
  .flowNav{ text-align: center; margin: 1em 0 0;
    ul{ list-style: none; margin: 0;padding: 0;font-size: 1.25em;}
    li{
      display: inline-block; margin: 0 1px; padding: 0;
      button{
        width: 1.6em; height: 1.6em; font-size: inherit;
        background: none; border: none; margin: 0; padding: 0;
        color: $primaryColor; cursor: pointer;
        &:hover, &:focus { color: $assistant;}
      }
      &.active{
        button{
          background: url(../images/poly02.svg) 0 0 no-repeat;
          background-size: contain;
          color: $fontInvert;
        }
      }
    }
  }

  @media screen and (min-width: $wwNormal){
    .blockHeader{ margin: 0 7% 3em; }
    // ---------- flowBox
    .flowBox{ position: relative; width: 100%; padding-bottom: 16px;
      background: url(../images/poly01.svg) calc(18vw - 2px) 0 no-repeat;
      background-size: auto 100%;
    }
  
    // ---------- flowList
    .flowList{ padding: 10vw 0 6vw; margin: 0 0 10px;
      &>li{
        width: auto; flex-basis: 8vw;
        padding: 60px 5vw 0;
        font-size: .85em; line-height: 1.8;
        height: calc(30vw + 100px);
        transition: .6s;
  
        &::before, &::after{
          content: ''; position: absolute; top: calc(60px + 6vw + 1.4em);
          width: 4vw; height: 2px; background: $fontColor;
        }
        &::before{ left: 0;}
        &::after{ right: 0;}

        figure{ width: 8vw; background-color: transparent;
          img{ width: 8vw;  height: 6vw; transition: .6s;}
          figcaption{
            width: calc(8vw + 1em);
            padding: .6em 0 0; margin: 0 -.5em;
            color: $fontColor;    
          }
        }
        .brief{ height: 0;}
  
        // 中間大圖
        &.active{ 
          flex: 0 0 64vw; padding-right: 0; padding-top: 0; font-size: 1em; 
          &::before, &::after{ display: none;}
          figure{ 
            position: relative; width: 100%;
            background-color: $assistant1;
            img{ width: 40vw; height: 30vw;}
            figcaption{
              position: absolute; left: 40vw;bottom: 0; top: 0;
              padding: 1em; margin: 0; width: 19vw;
              color: $fontInvert; overflow: hidden;

              display: flex; flex-flow: row; align-items: center;
              font-size: 1.15em; font-weight: bold;
            }
          }
          .brief{
            margin: 1em auto 0;height: 5.4em;overflow: hidden;
           }
        }
      }
    }
  
    // 左右箭頭 button
    .diskBtn{
      position: absolute; bottom: 5px; right: 6vw; z-index: 9;
      &.prev{ margin-right: 80px;}
    }
  }

  @media screen and (min-width: $wwMaximum){
    .flowBox{ position: relative; width: 100%; padding-bottom: 16px;
      background: url(../images/poly01.svg) calc(18vw - 2px) 0 no-repeat;
      background-size: auto 100%;
    }

    .flowList{ 
      padding: $wwMaximum*.1 0 $wwMaximum*.06;
      background-position: calc( #{$wwMaximum}*.18 - 2px) 0;

      &>li{ padding-left: $wwMaximum*.05; padding-right: $wwMaximum*.05;
        height: calc(#{$wwMaximum}*.3 + 120px);
        &::before, &::after{
          top: calc(60px + #{$wwMaximum}*.06 + 1.4em); width: $wwMaximum*.04;
        }

        figure{
          img { width: $wwMaximum*.08; height: $wwMaximum*0.06;}
          figcaption { width:calc( #{$wwMaximum}*.08 + 1em );}
        }

        &.active{ flex-basis: $wwMaximum*.64;
          figure{ padding-right: 228px;
            img{ width: $wwMaximum*.4; height: $wwMaximum*.3;}
            figcaption{ left: $wwMaximum*.4; width: $wwMaximum*.19; }
          }
        }
      }
    }

    .diskBtn{ right: $wwMaximum*.06;}
  }
}









// ------------------------------- flow3
.flow3{
  $dotDia : 12px;
  $bottom : 40px; 

  max-width: $wwMaximum;
  .blockHeader{ width: 93vw; max-width: 93%; margin: 0 0 3em auto; }

  .flowBox{
    position: relative; 
    width: 93vw; margin-left: 7vw; padding-bottom: 7em;overflow: hidden;
    outline: 1px solid red;
  }
  
  .flowList{ display: flex; 
    &>li{
      position: relative;flex: 0 0 76vw; margin-right: 4vw;
      outline: 1px solid blue;

      a{ width: 100%; }
      img { // width:height = 7:10
        width: 90%; height: 98vw; // 98vw ~= 76vw * 90% * (10/7)
        margin: 10% auto 0; object-fit: cover;
      }
      
      // 簡述文字
      .brief{
        position: absolute; left: 5%; bottom: 0; width: 90%;
        padding: 60px 7% 1.5em;
        background: linear-gradient(#0000, #0008 30%, #000f); color: #fff;
        h3{
          line-height: 1.6; margin: 0; padding: 0;
          text-overflow: ellipsis; white-space: nowrap; overflow: hidden;
        }
        p{
          line-height: 2; margin: 1em 0 0; padding: 1em 0 0;
          border-top: 2px solid $fontInvert;
          display: -webkit-box;overflow: hidden;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
        }
      }

      // 日期
      time{
        position: absolute; right: 0; top: 0;
        padding:1.8em 0 0; margin: 0; width: 6.5em; height: 6.5em;
        text-align: center; line-height: 1.6;
        background: url(../images/poly01.svg) no-repeat center top;
        background-size:contain;
        &::after{
          content: attr(data-label); display: block; font-size: .9rem;
        }
      }
      // 左邊裝飾色塊
      &::before{
        content: ''; z-index: 8;
        position: absolute; left: 0;top: 0; width: 10%; height: 85%;
      }
      &:nth-child(3n+1)::before{background-color: $assistant1;}
      &:nth-child(3n+2)::before{background-color: $assistant2;}
      &:nth-child(3n)::before{background-color: $assistant3;}
    }
  }

  // 左右箭頭 button
  .diskBtn{
    position: absolute; bottom: 5px; right: 6vw; z-index: 9;
    &.prev{ margin-right: 80px;}
  }

  .flowNav{ position: absolute; bottom: 40px; z-index: 9;
    width: calc(100% - 144px - 4vw);
    ul{list-style: none; margin: 0; padding: 0; text-align: center;}
    li{ margin: 0 5px; padding: 0; display: inline-block;
      button{
        width: $dotDia; height: $dotDia; border-radius: 50%;
        background: $primaryColor; border: none; margin: 0; padding: 0;
        transition: .2s;
      }
      &.now{
        button{ background: $assistant; box-shadow: $assistant 0 0 0 2px;}
      }
    }
  }

  @media screen and (min-width: $wwNormal){
    .flowList{
      &>li{
        flex-basis: 40vw; margin-right: 3vw;
        img { // width:height = 7:10
          width: 90%; height: 51.4vw; // 51.4vw = 40vw * 90% * (10/7)
        }
        
        // 簡述文字
        .brief{
          position: absolute; left: 5%; bottom: 0; width: 90%;
          padding: 60px 7% 1.5em;
          background: linear-gradient(#0000, #0008 30%, #000f); color: #fff;
          h3{
            line-height: 1.6; margin: 0; padding: 0;
            text-overflow: ellipsis; white-space: nowrap; overflow: hidden;
          }
          p{
            line-height: 2; margin: 1em 0 0; padding: 1em 0 0;
            border-top: 2px solid $fontInvert;
            display: -webkit-box;overflow: hidden;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
          }
        }
  
        // 日期
        time{ font-size: 1.25em;
          &::after{ font-size: 1rem;}
        }
        // 左邊裝飾色塊
        &::before{
          content: ''; z-index: 8;
          position: absolute; left: 0;top: 0; width: 10%; height: 85%;
        }
        &:nth-child(3n+1)::before{background-color: $assistant1;}
        &:nth-child(3n+2)::before{background-color: $assistant2;}
        &:nth-child(3n)::before{background-color: $assistant3;}
      }
    }
  
  }

  @media screen and (min-width: $wwMaximum){
    .flowBox{ width: $wwMaximum*.93; margin-left: $wwMaximum*.07;}
    .flowList{
      &>li{ flex-basis: $wwMaximum*.4; margin-right: $wwMaximum*.03;
        img{ width: $wwMaximum*.36; height: $wwMaximum*.51;
          // .36 = .4 * 90% , .36 * (10/7) ~= .51
        }
      }
    }
    .diskBtn{ right: $wwMaximum*.06;}
  }
}


